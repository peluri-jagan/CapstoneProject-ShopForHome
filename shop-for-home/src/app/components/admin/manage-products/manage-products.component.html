<div class="container mt-4">
  <h2>Manage Products</h2>

  <div *ngIf="message" class="alert alert-info">{{ message }}</div>

  <button class="btn btn-primary mb-3" (click)="selectProduct()">Add New Product</button>

  <!-- Product Form -->
  <div *ngIf="selectedProduct" class="card">
    <h4>{{ selectedProduct.id ? 'Edit Product' : 'Add Product' }}</h4>
    <form (ngSubmit)="selectedProduct.id ? updateProduct() : createProduct()">
      <div class="mb-2">
        <label>Name</label>
        <input class="form-control" [(ngModel)]="selectedProduct.name" name="name" required>
      </div>
      <div class="mb-2">
        <label>Description</label>
        <input class="form-control" [(ngModel)]="selectedProduct.description" name="description">
      </div>
      <div class="mb-2">
        <label>Price</label>
        <input type="number" class="form-control" [(ngModel)]="selectedProduct.price" name="price" required>
      </div>
      <div class="mb-2">
        <label>Stock Quantity</label>
        <input type="number" class="form-control" [(ngModel)]="selectedProduct.stockQuantity" name="stockQuantity">
      </div>
      <div class="mb-2">
        <label>Rating</label>
        <input type="number" class="form-control" [(ngModel)]="selectedProduct.rating" name="rating" step="0.1">
      </div>
      <div class="mb-2">
        <label>Image URL</label>
        <input class="form-control" [(ngModel)]="selectedProduct.imageUrl" name="imageUrl">
      </div>
      <div class="mb-2">
        <label>Category Id</label>
        <input type="number" class="form-control" [(ngModel)]="selectedProduct.categoryId" name="categoryId" required>
      </div>
      <button class="btn btn-success" type="submit">{{ selectedProduct.id ? 'Update' : 'Create' }}</button>
      <button type="button" class="btn btn-secondary ms-2" (click)="cancelEdit()">Cancel</button>
    </form>
  </div>

  <!-- Products Table -->
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Name</th>
        <th>Price</th>
        <th>Stock</th>
        <th>Rating</th>
        <th>Category</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of products">
        <td>{{ product.name }}</td>
        <td>{{ product.price | currency }}</td>
        <td>{{ product.stockQuantity }}</td>
        <td>{{ product.rating }}</td>
        <td>{{ product.categoryId }}</td>
        <td>
          <button class="btn btn-primary btn-sm me-1" (click)="selectProduct(product)">Edit</button>
          <button class="btn btn-danger btn-sm" (click)="deleteProduct(product.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
